---
import { SEO, Props as SeoProps } from "astro-seo";
import { getStoreDetails } from "../../helpers/services/store/details";
import globalLinks from "../../config/links";
import { generateFavicon } from "../../helpers/images";
import "../../assets/css/helpers.css";
import "../../assets/css/media.css";
import "../../assets/css/owl.min.css";
import "../../assets/css/owl.default.min.css";
import "bootstrap/dist/css/bootstrap.min.css";

export interface Props extends SeoProps {
  image: string;
}

const pageUrl = Astro.url;
const { title = "", description = "", image = "", ...seoProps } = Astro.props;
const websiteDetails = await getStoreDetails(globalLinks.website);
const domain =
  websiteDetails?.store_build_settings?.store_domain || import.meta.env.DOMAIN;
let favicon = await generateFavicon(
  websiteDetails?.store_primary_settings?.store_ui?.store_logo,
  domain
);
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <meta name="generator" content={"zzenz v1.0.0"} />
  <SEO
    title={title}
    titleTemplate={`%s - ${import.meta.env.DOMAIN}`}
    canonical={`${pageUrl}`}
    description={description}
    openGraph={{
      basic: {
        title: title,
        type: "website",
        url: `${pageUrl}`,
        image: image,
      },
      image: {
        alt: title,
      },
      optional: {
        description: description,
        siteName: domain,
      },
    }}
    twitter={{
      title: title,
      image: image,
      creator: "@zzenzapp",
      description: description,
      site: domain,
      card: "summary_large_image",
      imageAlt: title,
    }}
    extend={{
      ...(seoProps?.extend || {}),
      link: [{ rel: "icon", href: favicon }, ...(seoProps?.extend?.link || [])],
    }}
  />
  <!-- Bootstrap CSS -->
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
    crossorigin="anonymous"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
    rel="stylesheet"
  />
</head>
