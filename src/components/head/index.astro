---
import { SEO, Props as SeoProps } from "astro-seo";
import { getStoreDetails } from "../../helpers/services/store/details";
import globalLinks from "../../config/links";
import { generateFavicon } from "../../helpers/images";
import "bootstrap/dist/css/bootstrap.min.css";
import "../../assets/css/helpers.css";
import "../../assets/css/media.css";
import "../../assets/css/owl.min.css";
import "../../assets/css/owl.default.min.css";

export interface Props extends SeoProps {
  image: string;
}

const pageUrl = Astro.url;
const { title = "", description = "", image = "", ...seoProps } = Astro.props;
const websiteDetails = await getStoreDetails(globalLinks.website);
const domain =
  websiteDetails?.store_build_settings?.store_domain || import.meta.env.DOMAIN;
let favicon = await generateFavicon(
  websiteDetails?.store_primary_settings?.store_ui?.store_logo,
  domain
);
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <meta name="generator" content={"zzenz v1.0.0"} />
  <SEO
    title={title}
    titleTemplate={`%s - ${import.meta.env.DOMAIN}`}
    canonical={`${pageUrl}`}
    description={description}
    openGraph={{
      basic: {
        title: title,
        type: "website",
        url: `${pageUrl}`,
        image: image,
      },
      image: {
        alt: title,
      },
      optional: {
        description: description,
        siteName: domain,
      },
    }}
    twitter={{
      title: title,
      image: image,
      creator: "@zzenzapp",
      description: description,
      site: domain,
      card: "summary_large_image",
      imageAlt: title,
    }}
    extend={{
      ...(seoProps?.extend || {}),
      link: [
        { rel: "icon", href: favicon },
        { rel: "preconnect", href: "https://images.weserv.nl" },
        { rel: "dns-prefetch", href: "https://images.weserv.nl" },
        { rel: "preconnect", href: "https://fonts.googleapis.com" },
        { rel: "dns-prefetch", href: "https://fonts.googleapis.com" },
        { rel: "preconnect", href: "https://images.zzenz.com" },
        { rel: "dns-prefetch", href: "https://images.zzenz.com" },
        ...(seoProps?.extend?.link || []),
      ],
    }}
  />
</head>
